# Отчет по лабораторной работе №8

## Данные студента
- **ФИО:** Мазепа Илья Алексеевич
- **Группа:** М8О-209Б-23
- **Вариант:** 11
- **GitHub репозиторий:** [Ссылка на репозиторий](https://github.com/Tyhyqo/mai_oc)

## Цель работы
Приобретение практических навыков диагностики работы программного обеспечения.

## Задание
При выполнении лабораторных работ по курсу ОС необходимо продемонстрировать ключевые системные вызовы, которые в них используются и то, что их использование соответствует варианту ЛР. 

По итогам выполнения всех лабораторных работ отчет по данной ЛР должен содержать краткую сводку по исследованию написанных программ.

## Средства диагностики
**OC Unix:** `strace`

## Лабораторная работа №1

### Описание программы
Программа состоит из трех частей: `parent`, `child_1` и `child_2`. Родительский процесс создает два дочерних процесса и взаимодействует с ними через каналы (pipe).

### strace для `parent` программы
Команда для выполнения `strace`:
```sh
strace -o strace_parent.txt ./parent
```

### Анализ `strace` `parent`
- `execve("./parent", ["./parent"], ...)` - запуск программы parent.
- `pipe2([3, 4], 0)` - создание первого канала.
- `pipe2([5, 6], 0)` - создание второго канала.
- `pipe2([7, 8], 0)` - создание третьего канала.
- `clone(...)` - создание дочерних процессов.
- `write(4, "fzslhfdsflafha l hf ffh3h uih32 ...", 60)` - запись строки в первый канал.
- `read(7, "FZSLHFDSFLAFHA_L_HF_FFH3H_UIH32_...", 1024)` - чтение результата из третьего канала.
- `wait4(...)` - ожидание завершения дочерних процессов.

## Лабораторная работа №2

### Анализ `strace` для программы `main`

Команда для выполнения `strace`:

`strace -o strace.txt ./main 8`

### Анализ `strace` `main`
- `execve("./main", ["./main", "8"], ...)` - запуск программы main.
- `brk(NULL)` - инициализация сегмента данных.
- `mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) `- выделение памяти.
- `openat(AT_FDCWD, "/etc/ld.so.cache", O_RDONLY|O_CLOEXEC)` - открытие кэша динамического загрузчика.
- `openat(AT_FDCWD, "/lib/x86_64-linux-gnu/libtsan.so.0", O_RDONLY|O_CLOEXEC)` - открытие библиотеки ThreadSanitizer.
- `openat(AT_FDCWD, "/lib/x86_64-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC)` - открытие стандартной библиотеки C.
- `openat(AT_FDCWD, "/lib/x86_64-linux-gnu/libm.so.6", O_RDONLY|O_CLOEXEC)` - открытие библиотеки математических функций.
- `openat(AT_FDCWD, "/lib/x86_64-linux-gnu/libgcc_s.so.1", O_RDONLY|O_CLOEXEC)` - открытие библиотеки GCC.
- `pthread_create(...)` - создание потоков.
- `pthread_join(...)` - ожидание завершения потоков.
- `clock_gettime(CLOCK_MONOTONIC, &start)` - засекание времени начала выполнения.
- `clock_gettime(CLOCK_MONOTONIC, &end)` - засекание времени окончания выполнения.

Этот анализ показывает, что программа использует стандартные системные вызовы для работы с потоками и динамическими библиотеками, а также для измерения времени выполнения.